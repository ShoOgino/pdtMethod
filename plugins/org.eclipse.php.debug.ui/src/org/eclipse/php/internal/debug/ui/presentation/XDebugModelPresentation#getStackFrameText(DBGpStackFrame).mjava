	private String getStackFrameText(DBGpStackFrame frame) {
		try {
			// Fix bug #160443 (Stack frames line numbers update).
			// Synchronize the top frame with the given values.
			DBGpThread thread = (DBGpThread) frame.getThread();
			DBGpStackFrame topFrame = (DBGpStackFrame) thread.getTopStackFrame();
			if (topFrame != null && topFrame.equals(frame)) {
				frame = topFrame;
			} // end fix

			StringBuffer buffer = new StringBuffer();
			String frameName = frame.getName();
			if (frameName != null && frameName.length() > 0) {
				buffer.append(frame.getName());
				buffer.append("() "); //$NON-NLS-1$
			}
			buffer.append(frame.getSourceName());
			buffer.append(PHPDebugUIMessages.MPresentation_ATLine_1 + (frame.getLineNumber()));
			return buffer.toString();

		} catch (DebugException e) {
			Logger.logException("Unexpected error in PHPModelPresentation", e); //$NON-NLS-1$
		} catch (NullPointerException npe) {
			// This is here for debug purpose. Figure out why do we get nulls.
			StringBuffer errorMessage = new StringBuffer("NPE in getStackFrameText(). Frame = "); //$NON-NLS-1$
			errorMessage.append(frame);
			if (frame != null) {
				errorMessage.append(", Thread = "); //$NON-NLS-1$
				errorMessage.append(frame.getThread());
			}
			Logger.logException(errorMessage.toString(), npe);
		}
		return ""; //$NON-NLS-1$

	}

