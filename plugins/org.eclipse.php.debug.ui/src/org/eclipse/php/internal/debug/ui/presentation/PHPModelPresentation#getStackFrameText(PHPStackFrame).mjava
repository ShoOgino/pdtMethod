	private String getStackFrameText(PHPStackFrame frame) {
		try {
			// Fix bug #160443 (Stack frames line numbers update).
			// Synchronize the top frame with the given values.
			PHPThread thread = (PHPThread) frame.getThread();
			PHPStackFrame topFrame = (PHPStackFrame) thread.getTopStackFrame();
			if (topFrame.equals(frame)) {
				frame = topFrame;				
			} // end fix
			
			StringBuffer buffer = new StringBuffer();
			String frameName = frame.getName();
			if (frameName != null && frameName.length() > 0) {
				buffer.append(frame.getName());
				buffer.append("() ");
			}
			buffer.append(frame.getSourceName());
			buffer.append(PHPDebugUIMessages.MPresentation_ATLine_1 + (frame.getLineNumber()));
			return buffer.toString();

		} catch (DebugException e) {
			Logger.logException("Unexpected error in PHPModelPresentation", e);
		}
		return null;

	}

