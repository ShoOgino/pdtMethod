	protected void setASTLevel(PHPVersion level, boolean doRefresh) {
		PHPVersion oldLevel = fPHPVersion;
		fPHPVersion = level;

		if (doRefresh && fSourceRoot != null && oldLevel != fPHPVersion) {
			try {
				refreshAST();
			} catch (CoreException e) {
				showAndLogError("Could not set AST to new level.", e); //$NON-NLS-1$
				// set back to old level
				fPHPVersion = oldLevel;
			}
		}
	}

