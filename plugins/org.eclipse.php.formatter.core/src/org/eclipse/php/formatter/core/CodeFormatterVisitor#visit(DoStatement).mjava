	public boolean visit(DoStatement doStatement) {
		// do-while body
		lineWidth += 2;
		Statement body = doStatement.getBody();
		handleAction(doStatement.getStart() + 2, body, true);
		if (preferences.control_statement_insert_newline_before_while_in_do) {
			insertNewLine();
			indent();
		} else {
			setSpaceAfterBlock(body);
		}

		String textBetween = ""; //$NON-NLS-1$
		int indexOfWhile = -1;
		int lastPosition = body.getEnd();
		try {
			textBetween = document.get(lastPosition, doStatement.getCondition().getStart() - body.getEnd())
					.toLowerCase();
		} catch (BadLocationException e) {
			Logger.logException(e);
			return false;
		}
		indexOfWhile = textBetween.lastIndexOf("while"); //$NON-NLS-1$
		if (indexOfWhile > 0) {
			indexOfWhile += lastPosition;
			handleChars(lastPosition, indexOfWhile + 5); // 5 = "while".length()
			appendToBuffer("while"); //$NON-NLS-1$
			handleChars(indexOfWhile + 5, indexOfWhile + 5);
			lastPosition = indexOfWhile + 5;
		} else {
			appendToBuffer("while"); //$NON-NLS-1$
		}

		// handle the chars between the 'while' and the condition start position
		if (this.preferences.insert_space_before_opening_paren_in_while) {
			insertSpace();
		}
		appendToBuffer(OPEN_PARN);
		if (this.preferences.insert_space_after_opening_paren_in_while) {
			insertSpace();
		}
		handleChars(lastPosition, doStatement.getCondition().getStart());

		// handle the while condition
		doStatement.getCondition().accept(this);

		// set the while closing paren spaces
		if (this.preferences.insert_space_before_closing_paren_in_while) {
			insertSpace();
		}
		appendToBuffer(CLOSE_PARN);

		handleSemicolon(doStatement.getCondition().getEnd(), doStatement.getEnd());
		return false;
	}

