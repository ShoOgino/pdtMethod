	private void replaceAll(IDocument document, List<ReplaceEdit> changes, IStructuredModel domModelForPHP)
			throws BadLocationException {
		MultiTextEdit multiEdit = new MultiTextEdit();
		multiEdit.addChildren(changes.toArray(new ReplaceEdit[0]));
		Map<String, IDocumentPartitioner> partitioners = null;
		try {
			if (multiEdit.getChildrenSize() > 20) {
				partitioners = TextUtilities.removeDocumentPartitioners(document);
			}
			RewriteSessionEditProcessor editProcessor = new RewriteSessionEditProcessor(document, multiEdit,
					TextEdit.CREATE_UNDO | TextEdit.UPDATE_REGIONS);
			editProcessor.performEdits();
		} finally {
			if (partitioners != null) {
				TextUtilities.addDocumentPartitioners(document, partitioners);
			}
		}
	}

