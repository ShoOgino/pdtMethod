	protected boolean isInArrayOption(boolean haveSpacesAtEnd, String firstWord, String lastWord, int startPosition, int offset, TextSequence text, String type) {
		if (PHPPartitionTypes.isPHPQuotesState(type)) {
			return false;
		}
		boolean isArrayOption = false;
		if (startPosition > 0 && !lastWord.startsWith(DOLLAR)) { //$NON-NLS-1$
			if (haveSpacesAtEnd) {
				if (lastWord.length() == 0 && firstWord.length() == 0) {
					if (text.charAt(startPosition - 1) == '[') {
						isArrayOption = true;
					}
				}
			} else {
				if (firstWord.length() == 0) {
					if (text.charAt(startPosition - 1) == '[') {
						isArrayOption = true;
					}
				}
			}
		}
		if (!isArrayOption) {
			return false;
		}
		int endPosition = startPosition - 1;

		endPosition = PHPTextSequenceUtilities.readBackwardSpaces(text, endPosition);
		startPosition = PHPTextSequenceUtilities.readIdentifierStartIndex(text, endPosition, true);
		String variableName = text.subSequence(startPosition, endPosition).toString();

		reportArrayVariables(variableName, offset, lastWord);

		IModelElement[] functions = CodeAssistUtils.getWorkspaceMethods(lastWord, false);
		for (IModelElement function : functions) {
			try {
				if ((((IMethod)function).getFlags() & IPHPModifiers.Internal) == 0) {
					reportMethod((IMethod) function, RELEVANCE_METHODS);
				}
			} catch (ModelException e) {
				Logger.logException(e);
			}
		}

		if (showConstantAssist()) {
			IModelElement[] constants = CodeAssistUtils.getWorkspaceFields(lastWord, false);
			int relevance = 4242;
			for (IModelElement constant : constants) {
				IField field = (IField) constant;
				try {
					if ((field.getFlags() & Modifiers.AccConstant) != 0) {
						reportField(field, relevance--, false);
					}
				} catch (ModelException e) {
					Logger.logException(e);
				}
			}
		}
		return true;
	}

