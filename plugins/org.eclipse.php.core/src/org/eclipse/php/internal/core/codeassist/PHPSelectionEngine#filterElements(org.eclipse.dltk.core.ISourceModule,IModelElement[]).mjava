	protected IModelElement[] filterElements(org.eclipse.dltk.core.ISourceModule sourceModule, IModelElement[] elements) {
		if (fileNetwokFilter) {
			elements = PHPModelUtils.fileNetworkFilter(sourceModule, elements);
		}

		// prefer elements from current module:
		List<IModelElement> fromThisModule = new LinkedList<IModelElement>();
		for (IModelElement element : elements) {
			if (((ModelElement) element).getSourceModule().equals(sourceModule)) {
				fromThisModule.add(element);
			}
		}
		if (fromThisModule.size() > 0) {
			return fromThisModule.toArray(new IModelElement[fromThisModule.size()]);
		}
		return elements;
	}

