	private lr_parser getParserInstance(PHPVersion phpVersion, Scanner lexer) {
		if (PHPVersion.PHP4 == phpVersion) {
			final org.eclipse.php.internal.core.ast.scanner.php4.PhpAstParser parser = new org.eclipse.php.internal.core.ast.scanner.php4.PhpAstParser(
					lexer);
			parser.setAST(this);
			return parser;
		} else if (PHPVersion.PHP5 == phpVersion) {
			final org.eclipse.php.internal.core.ast.scanner.php5.PhpAstParser parser = new org.eclipse.php.internal.core.ast.scanner.php5.PhpAstParser(
					lexer);
			parser.setAST(this);
			return parser;
		} else if (PHPVersion.PHP5_3 == phpVersion) {
			final org.eclipse.php.internal.core.ast.scanner.php53.PhpAstParser parser = new org.eclipse.php.internal.core.ast.scanner.php53.PhpAstParser(
					lexer);
			parser.setAST(this);
			return parser;
		} else {
			throw new IllegalArgumentException(CoreMessages
					.getString("ASTParser_1")
					+ phpVersion);
		}
	}

