	public boolean endvisit(TypeDeclaration type) throws Exception {
		if (type instanceof NamespaceDeclaration) {
			NamespaceDeclaration namespaceDecl = (NamespaceDeclaration) type;
			if (namespaceDecl.getName() == NamespaceDeclaration.GLOBAL) {
				return true;
			}
			
			if (pendingNS == null && !namespaceDecl.isBracketed()) { // unbracketed syntax
				pendingNS = namespaceDecl;
				return true;
			}
			
			if (type == pendingNS) {
				pendingNS = null;
			}
		}
		
		declarations.pop();

		// resolve more type member declarations
		resolveMagicMembers(type);

		for (PHPSourceElementRequestorExtension visitor : extensions) {
			visitor.endvisit(type);
		}

		return super.endvisit(type);
	}

