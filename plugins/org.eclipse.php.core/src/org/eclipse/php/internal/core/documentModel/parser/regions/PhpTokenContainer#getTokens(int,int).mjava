	public ITextRegion[] getTokens(final int offset, final int length) throws BadLocationException {
		assert length >= 0;
		List result = new ArrayList(); // list of ITextRegion

		ITextRegion token = getToken(offset);
		result.add(token);
		
		while (tokensIterator.hasNext() && token.getEnd() <= offset + length) {
			token = (ITextRegion) tokensIterator.next();
			result.add(token);
		} 

		return (ITextRegion[]) result.toArray(new ITextRegion[result.size()]);
	}

