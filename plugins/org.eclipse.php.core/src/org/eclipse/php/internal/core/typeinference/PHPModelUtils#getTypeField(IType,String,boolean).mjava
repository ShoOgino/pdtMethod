	/**
	 * Returns the type field element by name
	 * 
	 * @param type
	 *            Type
	 * @param prefix
	 *            Field name or prefix
	 * @param exactName
	 *            Whether the name is exact name or prefix
	 * @throws ModelException
	 */
	public static IField[] getTypeField(IType type, String prefix,
			boolean exactName) throws ModelException {

		List<IField> result = new LinkedList<IField>();
		IField[] fields = type.getFields();
		for (IField field : fields) {
			String elementName = field.getElementName();
			if (elementName.startsWith("$") && !prefix.startsWith("$")) {
				elementName = elementName.substring(1);
			}
			if (exactName
					&& elementName.equalsIgnoreCase(prefix)
					|| !exactName
					&& elementName.toLowerCase().startsWith(
							prefix.toLowerCase())) {
				result.add(field);
			}
		}
		return (IField[]) result.toArray(new IField[result.size()]);
	}

