	private boolean visit(TypeReference node, ProblemSeverity severity) throws Exception {
		if (PHPSimpleTypes.isSimpleTypeCS(node.getName()) || TYPE_SKIP.contains(node.getName())) {
			return true;
		}
		TypeReferenceInfo tri = new TypeReferenceInfo(node, false);
		String nodeName = tri.getTypeName();
		String key = null;
		if (tri.isGlobal()) {
			key = node.getName();
		} else {
			key = getFirstSegmentOfTypeName(nodeName);
		}
		UsePartInfo info = usePartInfo.get(key.toLowerCase());

		if (info != null) {
			if (!nodeName.equals(info.getFullyQualifiedName()))
				info.refer();
		}
		boolean isFound = findElement(tri);
		if (!isFound) {
			reportProblem(node, Messages.UndefinedType, PhpProblemIdentifier.UndefinedType, node.getName(), severity);
		}
		return false;
	}

