	/**
	 * @param offset
	 * @return the partition type of the given offset
	 * @throws BadLocationException
	 */
	public String getPartitionType(int offset) throws BadLocationException {
		final ITextRegion token = getToken(offset);

		assert token != null;
		final String type = token.getType();

		if (PHPPartitionTypes.isPHPMultiLineCommentState(type))
			return PHPPartitionTypes.PHP_MULTI_LINE_COMMENT;
		else if (PHPPartitionTypes.isPHPLineCommentState(type))
			return PHPPartitionTypes.PHP_SINGLE_LINE_COMMENT;
		else if (PHPPartitionTypes.isPHPDocState(type))
			return PHPPartitionTypes.PHP_DOC;
		else if (PHPPartitionTypes.isPHPQuotesState(type))
			return PHPPartitionTypes.PHP_QUOTED_STRING;
		else if (PHPRegionTypes.TASK == type) {
			return getPartitionType(offset - 1);
		} else {
			return PHPPartitionTypes.PHP_DEFAULT;
		}
	}

