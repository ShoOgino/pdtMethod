	/**
	 * Write a Map to the XML.
	 * 
	 * @param map
	 *            A Map
	 */
	public void writeMap(Map map) {
		HashMap tagsMap = new HashMap();
		startTag(MAP_TAG, null);
		for (Entry entry : (Set<Entry>) map.entrySet()) {
			Object key = entry.getKey();
			Object values = entry.getValue();
			tagsMap.put(NAME_TAG, key.toString());
			startTag(KEY_TAG, tagsMap);
			if (key != null) {
				if (values instanceof List) {
					// Traverse the list and save each of its elements as a
					// value.
					Iterator valuesIter = ((List) values).iterator();
					while (valuesIter.hasNext()) {
						printSimpleTag(VALUE_TAG, valuesIter.next());
					}
				} else {
					// Save the mapping in as a simple XML tag.
					if (values != null) {
						printSimpleTag(VALUE_TAG, values.toString());
					}
				}
			}
			endTag(KEY_TAG);
		}
		endTag(MAP_TAG);
		flush();
	}

