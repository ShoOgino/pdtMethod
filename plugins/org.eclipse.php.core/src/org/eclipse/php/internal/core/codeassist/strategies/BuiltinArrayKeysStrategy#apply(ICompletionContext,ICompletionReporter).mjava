	public void apply(ICompletionContext context, ICompletionReporter reporter) throws BadLocationException {
		if (!(context instanceof ArrayKeyContext)) {
			return;
		}

		ArrayKeyContext arrayContext = (ArrayKeyContext) context;
		CompletionRequestor requestor = arrayContext.getCompletionRequestor();
		String arrayVarName = arrayContext.getArrayVarName();

		String prefix = arrayContext.getPrefix();

		if (arrayVarName.equals("$_SERVER") || arrayVarName.equals("$HTTP_SERVER_VARS")) { //NON-NLS-1 //NON-NLS-2
			reportVariables(reporter, arrayContext, SERVER_VARS, prefix);
		} else if (arrayVarName.equals("$_SESSION") || arrayVarName.equals("$HTTP_SESSION_VARS")) { //NON-NLS-1 //NON-NLS-2
			reportVariables(reporter, arrayContext, SESSION_VARS, prefix);
		} else if (arrayVarName.equals("$GLOBALS")) { //NON-NLS-1
			int mask = 0;
			if (requestor.isContextInformationMode()) {
				mask |= CodeAssistUtils.EXACT_NAME;
			}
			IModelElement[] elements = CodeAssistUtils.getGlobalFields(arrayContext.getSourceModule(), prefix, mask);
			SourceRange replaceRange = new SourceRange(arrayContext.getOffset() - prefix.length(), prefix.length());
			for (IModelElement element : elements) {
				IField field = (IField) element;
				reporter.reportField(field, "", replaceRange); //NON-NLS-1
			}

			reportVariables(reporter, arrayContext, PHP_VARIABLES, prefix, true);
		}

		if (!arrayContext.hasQuotes()) {
			super.apply(arrayContext, reporter);
		}
	}

