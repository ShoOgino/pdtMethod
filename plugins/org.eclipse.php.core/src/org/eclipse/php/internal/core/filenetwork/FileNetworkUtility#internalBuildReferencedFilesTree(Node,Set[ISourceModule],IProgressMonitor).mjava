	private static void internalBuildReferencedFilesTree(final Node root,
			Set<ISourceModule> processedFiles, IProgressMonitor monitor)
			throws CoreException {
		ISourceModule sourceModule = root.getFile();
		IField[] includes = PhpModelAccess.getDefault().findIncludes(null,
				MatchRule.PREFIX, SearchEngine.createSearchScope(sourceModule),
				monitor);

		for (IField include : includes) {
			String filePath = ((IncludeField) include).getFilePath();
			ISourceModule testFile = findSourceModule(sourceModule, filePath);
			if (testFile != null && !processedFiles.contains(testFile)) {
				processedFiles.add(testFile);
				root.addChild(new Node(testFile));
			}
		}

		Collection<Node> children = root.getChildren();
		if (children != null) {
			for (Node child : children) {
				internalBuildReferencedFilesTree(child, processedFiles, monitor);
			}
		}
	}

