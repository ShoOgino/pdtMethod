	protected void validate() {
		if (getServer() == null) {
			setMessage("", IMessageProvider.ERROR); //$NON-NLS-1$
			return;
		}

		setMessage(getDescription(), IMessageProvider.NONE);

		String urlStr = url.getText();
		if (urlStr != null && !urlStr.trim().equals("")) {
			boolean ok = checkServerUrl(urlStr);
			if (!ok) {
				setMessage(
						PHPServerUIMessages
								.getString("ServerCompositeFragment.duplicateServerUrl"), IMessageProvider.ERROR); //$NON-NLS-1$
			}
		}

		try {
			URL url = new URL(urlStr);
			if (url.getPath() != null && url.getPath().length() != 0) {
				urlStr = null;
			}
		} catch (MalformedURLException e1) {
			// in case of Malformed URL - reset
			urlStr = null;
		}

		if (urlStr == null || urlStr.equals("")) { //$NON-NLS-1$
			setMessage(
					PHPServerUIMessages
							.getString("ServerCompositeFragment.enterValidURL"), IMessageProvider.ERROR); //$NON-NLS-1$
			return;
		}

		try {
			URL baseURL = new URL(urlStr);
			String host = baseURL.getHost();
			if (host.trim().length() == 0) {
				setMessage(
						PHPServerUIMessages
								.getString("ServerCompositeFragment.serverURLEmpty"), IMessageProvider.ERROR); //$NON-NLS-1$
			}
			int port = baseURL.getPort();

			// workingCopy.setHost(host);
			// server.setPort(String.valueOf(port));
			modifiedValuesCache.host = host;
			modifiedValuesCache.port = port;
		} catch (Exception e) {
			setMessage(
					PHPServerUIMessages
							.getString("ServerCompositeFragment.enterValidURL"), IMessageProvider.ERROR); //$NON-NLS-1$
			return;
		}

		String serverName = modifiedValuesCache.serverName;
		if (serverName == null || serverName.trim().equals("")) { //$NON-NLS-1$
			setMessage(
					PHPServerUIMessages
							.getString("ServerCompositeFragment.missingServerName"), IMessageProvider.ERROR); //$NON-NLS-1$
		} else {
			boolean ok = checkServerName(serverName);
			if (!ok) {
				setMessage(
						PHPServerUIMessages
								.getString("ServerCompositeFragment.duplicateServerName"), IMessageProvider.ERROR); //$NON-NLS-1$
			}
		}
		String webrootStr = webroot.getText().trim();
		if (webrootStr.length() != 0 && !new Path(webrootStr).toFile().exists()) {
			setMessage(
					PHPServerUIMessages
							.getString("ServerCompositeFragment.webrootNotExists"), IMessageProvider.ERROR);//$NON-NLS-1$
		}

		controlHandler.update();
	}

