	/**
	 * @see org.eclipse.debug.ui.ILaunchConfigurationTab#performApply(ILaunchConfigurationWorkingCopy)
	 */
	public void performApply(ILaunchConfigurationWorkingCopy configuration) {
		if (server != null) {
			configuration.setAttribute(Server.NAME, server.getName());
		} else {
			configuration.setAttribute(Server.NAME, (String) null);
		}
		String fileName = fFile.getText();
		String publishTo = fPublishTo.getText().replaceAll("\\\\", "/"); //$NON-NLS-1$ //$NON-NLS-2$
		String url = fURL.getText();
		boolean deployable = publish.getSelection();
		// compute the context root
		if (autoGeneratedURL.getSelection()) {
			// The context root is the same as the 'publish to' (in case we publish)
			if (deployable) {
				contextRoot = publishTo;
			} else {
				contextRoot = computeContextRoot(url, fileName, server);
			}
		} else {
			contextRoot = computeContextRoot(url, fileName, server);
		}
		configuration.setAttribute(Server.FILE_NAME, fileName);
		configuration.setAttribute(Server.CONTEXT_ROOT, contextRoot);
		configuration.setAttribute(Server.PUBLISH_TO, publishTo);
		configuration.setAttribute(Server.PUBLISH, deployable);
		configuration.setAttribute(Server.BASE_URL, url);
		configuration.setAttribute(AUTO_GENERATED_URL, autoGeneratedURL.getSelection());

		boolean autoGenerateURL = autoGeneratedURL.getSelection();
		fURLLabel.setEnabled(!autoGenerateURL);
		fURL.setEditable(!autoGenerateURL);
//		fContextRootLabel.setEnabled(!autoGenerateURL);
//		fContextRoot.setEditable(!autoGenerateURL);
		
		boolean publishEnabled = publish.getSelection();
		fPublishToLabel.setEnabled(publishEnabled);
		fPublishTo.setEditable(publishEnabled);

		applyExtension(configuration);

		if (saveWorkingCopy) {
			try {
				configuration.doSave();
			} catch (CoreException e) {
			}
			saveWorkingCopy = false;
		}
	}

