	private void handleEdit() {

		Script script = null;
		int index = -1;
		Object element = ((StructuredSelection) scriptsViewer.getSelection()).getFirstElement();

		// get parent if element is string
		if (element instanceof String) {
			element = ((ScriptsController) scriptsViewer.getContentProvider()).getParent(element);
			// find selection index
			TreeItem selectedItem = scriptsViewer.getTree().getSelection()[0];
			TreeItem[] items = selectedItem.getParentItem().getItems();
			for (int i = 0; i < items.length; i++) {
				if (items[i] == selectedItem) {
					index = i;
					break;
				}
			}
		}

		if (element instanceof Script) {
			script = (Script) element;
		}

		if (script != null && index != -1) {
			ScriptDialog diag = new ScriptDialog(scriptsViewer.getTree().getShell(), script.clone(), index);
			diag.setEventEnabled(false);

			if (diag.open() == Dialog.OK) {
				Script cpscript = composerPackage.getScripts().get(script.getScript());
				if (cpscript.equals(diag.getScript())) {
					// nothing changed
					return;
				}

				assert cpscript.getScript().equals(diag.getScript().getScript());

				cpscript.clear();
				cpscript.addHandlers(diag.getScript().getHandlers());
			}
		}
	}

