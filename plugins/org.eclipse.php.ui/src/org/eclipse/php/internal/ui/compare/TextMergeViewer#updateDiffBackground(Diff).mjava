	private void updateDiffBackground(Diff diff) {
		
		if (! fHighlightRanges)
			return;
		
		if (diff == null || diff.isToken())
			return;
			
		if (fShowCurrentOnly && !isCurrentDiff(diff))
			return;
						
		Color c= getColor(null, getFillColor(diff));
		if (c == null)
			return;
			
		if (isThreeWay())
			fAncestor.setLineBackground(diff.getPosition(ANCESTOR_CONTRIBUTOR), c);
		fLeft.setLineBackground(diff.getPosition(LEFT_CONTRIBUTOR), c);
		fRight.setLineBackground(diff.getPosition(RIGHT_CONTRIBUTOR), c);
	}

