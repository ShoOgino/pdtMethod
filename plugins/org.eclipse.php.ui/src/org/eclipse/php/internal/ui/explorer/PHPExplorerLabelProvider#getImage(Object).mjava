	@Override
	public Image getImage(Object element) {
		IModelElement modelElement = null;
		if (element instanceof ExternalProjectFragment) {
			return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_LIBRARY);
		}

		if (element instanceof IncludePath) {
			Object entry = ((IncludePath) element).getEntry();

			// An included PHP project
			if (entry instanceof IBuildpathEntry) {
				if (((IBuildpathEntry) entry).getEntryKind() == IBuildpathEntry.BPE_PROJECT) {
					return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_PHP_PROJECT);

				}
				// A library
				if (((IBuildpathEntry) entry).getEntryKind() == IBuildpathEntry.BPE_LIBRARY) {
					return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_LIBRARY);
				}
			}

			if (entry instanceof ExternalProjectFragment) {
				return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_LIBRARY);
			}
			
			// Folder in the include path, should have "source-folder" image.
			if (entry instanceof IFolder) {
				return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_PHPFOLDER_ROOT);
			}
			
			if (entry instanceof IResource) {
				return (getImage((IResource) entry));

			}
			return null;
		}

		if (element instanceof IResource) {
			modelElement = DLTKCore.create((IResource) element);
		}

		if (element instanceof IModelElement)
			modelElement = (IModelElement) element;

		if (modelElement != null) {
			IScriptProject project = modelElement.getScriptProject();
			if (!project.isOnBuildpath(modelElement)) {//not in build path, hence: hollow, non-pakg icons
				if (modelElement instanceof ISourceModule)
					return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_CUNIT_RESOURCE);
				if (modelElement instanceof IProjectFragment || modelElement instanceof IScriptFolder)
					return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_PHP_FOLDER);
			} else {//in build path ...
				if (element instanceof IScriptFolder)
					return PHPPluginImages.get(PHPPluginImages.IMG_OBJS_PHPFOLDER_ROOT);
			}
		}

		return super.getImage(element);
	}

