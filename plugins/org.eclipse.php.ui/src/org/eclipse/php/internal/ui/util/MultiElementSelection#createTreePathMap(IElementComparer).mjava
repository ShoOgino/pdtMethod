	private CustomHashtable createTreePathMap(IElementComparer comparer) {
		CustomHashtable result = new CustomHashtable(comparer);
		for (int i = 0; i < fAllTreePaths.length; i++) {
			TreePath path = fAllTreePaths[i];
			Object key = path.getLastSegment();
			if (key != null) {
				Object value = result.get(key);
				if (value == null) {
					result.put(key, path);
				} else if (value instanceof TreePath) {
					List l = new ArrayList();
					l.add(value);
					l.add(path);
					result.put(key, l);
				} else if (value instanceof List) {
					((List) value).add(path);
				} else {
					Assert.isTrue(false, "Should not happen"); //$NON-NLS-1$
				}
			}
		}
		return result;
	}

