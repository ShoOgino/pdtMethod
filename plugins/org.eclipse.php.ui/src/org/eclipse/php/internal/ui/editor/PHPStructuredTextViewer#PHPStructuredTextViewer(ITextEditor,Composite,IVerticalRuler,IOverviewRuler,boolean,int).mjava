	public PHPStructuredTextViewer(ITextEditor textEditor, Composite parent, IVerticalRuler verticalRuler,
			IOverviewRuler overviewRuler, boolean showAnnotationsOverview, int styles) {
		super(parent, verticalRuler, overviewRuler, showAnnotationsOverview, styles);
		this.fTextEditor = textEditor;
		if (fTextEditor instanceof PHPStructuredEditor) {
			PHPStructuredEditor phpEditor = (PHPStructuredEditor) fTextEditor;
			phpEditor.addReconcileListener(new IPhpScriptReconcilingListener() {

				@Override
				public void reconciled(Program program, boolean forced, IProgressMonitor progressMonitor) {
					if (fPostSelectionLength != -1) {
						Display.getDefault().syncExec(new Runnable() {
							@Override
							public void run() {
								synchronized (PHPStructuredTextViewer.this) {
									if (fPostSelectionOffset >= 0 && fPostSelectionLength >= 0
											&& getDocument() != null) {
										firePostSelectionChanged(fPostSelectionOffset, fPostSelectionLength);
									}
								}
							}
						});
					}
				}

				@Override
				public void aboutToBeReconciled() {
				}
			});
		}
	}

