	protected Object[] getAllNamespaces(final IScriptProject project)
			throws ModelException {
		IDLTKSearchScope scope = SearchEngine.createSearchScope(project,
				IDLTKSearchScope.SOURCES);
		IType[] namespaces = PhpModelAccess.getDefault().findTypes(null,
				MatchRule.PREFIX, Modifiers.AccNameSpace, 0, scope, null);
		Map<String, List<IType>> aggregated = new HashMap<String, List<IType>>();
		for (IType ns : namespaces) {
			String elementName = ns.getElementName();
			List<IType> l = aggregated.get(elementName);
			if (l == null) {
				l = new LinkedList<IType>();
				aggregated.put(elementName, l);
			}
			l.add(ns);
		}
		List<IType> result = new LinkedList<IType>();
		for (String namespaceName : aggregated.keySet()) {
			List<IType> list = aggregated.get(namespaceName);
			result.add(new NamespaceNode(project, namespaceName, list
					.toArray(new IType[list.size()])));
		}
		return result.toArray();
	}

