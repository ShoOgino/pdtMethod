	/*
	 * (non-Javadoc)
	 * @see org.eclipse.php.internal.ui.search.AbstractOccurrencesFinder#findOccurrences()
	 */
	protected void findOccurrences() {
		IStructuredDocument structuredDocument = ((IStructuredDocument) document);
		IStructuredDocumentRegion region = structuredDocument.getRegionAtCharacterOffset(offset);
		if (region.getRegions().size() > 0) {
			htmlTag = region.getText(region.getRegions().get(1));
		} else {
			htmlTag = region.getFullText();
		}
		if (region.isEnded()) {
			IStructuredModel existingModelForRead = null;
			try {
				existingModelForRead = StructuredModelManager.getModelManager().getExistingModelForRead(document);
				if (existingModelForRead instanceof DOMModelForPHP) {
					DOMModelForPHP domModelForPHP = (DOMModelForPHP) existingModelForRead;
					IndexedRegion indexedRegion = domModelForPHP.getIndexedRegion(offset);
					if (indexedRegion instanceof IDOMElement) {
						IDOMElement domElement = (IDOMElement) indexedRegion;
						IStructuredDocumentRegion endStructuredDocumentRegion = domElement.getEndStructuredDocumentRegion();
						IStructuredDocumentRegion startStructuredDocumentRegion = domElement.getStartStructuredDocumentRegion();
						if (endStructuredDocumentRegion != null && startStructuredDocumentRegion != null && endStructuredDocumentRegion.getRegions().size() > 0 && startStructuredDocumentRegion.getRegions().size() > 0) {
							ITextRegion innerEndTag = endStructuredDocumentRegion.getRegions().get(1);
							ITextRegion innerStartTag = startStructuredDocumentRegion.getRegions().get(1);
							// mark the occurrences only when the HTML tag has a closing tag
							fDescription = Messages.format(BASE_DESCRIPTION, startStructuredDocumentRegion.getFullText());
							fResult.add(new OccurrenceLocation(startStructuredDocumentRegion.getStart() + innerStartTag.getStart(), innerStartTag.getTextLength(), getOccurrenceType(null), fDescription));
							fResult.add(new OccurrenceLocation(endStructuredDocumentRegion.getStart() + innerEndTag.getStart(), innerEndTag.getTextLength(), getOccurrenceType(null), fDescription));
						}
					}

				}
			} finally {
				if (existingModelForRead != null) {
					existingModelForRead.releaseFromRead();
				}
			}
		}
	}

