	public String getHoverInfo(ITextViewer viewer, IRegion hoverRegion) {
		IAnnotationModel model = ((SourceViewer) viewer).getAnnotationModel();
		if (model != null) {
			List messages = new ArrayList();
			Iterator e = model.getAnnotationIterator();
			while (e.hasNext()) {
				Annotation a = (Annotation) e.next();
				if (!isAnnotationValid(a))
					continue;

				Position position = model.getPosition(a);
				if (position == null)
					continue;

				// check if this is an annotation in the region we are
				// concerned with
				if (position.overlapsWith(hoverRegion.getOffset(),
						hoverRegion.getLength())) {
					String msg = a.getText();
					if ((msg != null) && msg.trim().length() > 0) {
						// now we only consider ProblemAnnotation,and sometime
						// we have duplicate ProblemAnnotation for the same
						// problem,so we filter the duplicate one(s)
						if (a instanceof ProblemAnnotation) {
							boolean duplicated = false;
							int j = 0;
							while (j < messages.size() && !duplicated) {
								duplicated = messages.get(j).equals(msg);
								++j;
							}
							if (!duplicated) {
								messages.add(msg);
							}
						}
					}
				}
			}
			if (messages.size() > 1) {
				return formatMessages(messages);
			} else if (messages.size() > 0) {
				return formatMessage(messages.get(0).toString());
			}
		}
		return null;
	}

