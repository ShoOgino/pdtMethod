	private CodeData getIfInClassDeclaretion(PHPProjectModel projectModel, String fileName, TextSequence text, int offset) {
		int classEnd = PHPTextSequenceUtilities.isInClassDeclaretion(text);
		if (classEnd == -1) {
			return null;
		}
		boolean isClassDeclaration = true;
		if (classEnd >= 6) {
			String classString = text.subSequence(classEnd - 6, classEnd - 1).toString();
			isClassDeclaration = classString.equals("class");
		}
		text = text.subTextSequence(classEnd, text.length());

		// check if we are in the class identifier part.
		int classIdentifierEndPosition = 0;
		for (; classIdentifierEndPosition < text.length(); classIdentifierEndPosition++) {
			if (!Character.isLetterOrDigit(text.charAt(classIdentifierEndPosition))) {
				break;
			}
		}
		// we are in class identifier part.
		if (classIdentifierEndPosition == text.length()) {
			return projectModel.getClass(fileName, text.toString());
		}
		text = text.subTextSequence(classIdentifierEndPosition, text.length());

		int endPosition = text.length();
		int startPosition = PHPTextSequenceUtilities.readIdentifiarStartIndex(text, endPosition, false);
		String elementName = text.subSequence(startPosition, endPosition).toString();

		Matcher extendsMatcher = extendsPattern.matcher(text);
		Matcher implementsMatcher = implementsPattern.matcher(text);
		boolean foundExtends = extendsMatcher.find();
		boolean foundImplements = implementsMatcher.find();
		if (!foundExtends && !foundImplements) {
			if (isClassDeclaration) {
				return filterExact (getExtendsImplementsCodeData(projectModel, elementName, offset), elementName);
			} else {
				return filterExact (getExtendsCodeData(projectModel, elementName, offset), elementName);
			}
		}

		endPosition = PHPTextSequenceUtilities.readBackwardSpaces(text, startPosition);
		startPosition = PHPTextSequenceUtilities.readIdentifiarStartIndex(text, endPosition, true);
		String firstWord = text.subSequence(startPosition, endPosition).toString();

		if (firstWord.equalsIgnoreCase("extends")) {
			return filterExact (getBaseClassList(projectModel, elementName, offset, isClassDeclaration), elementName);
		}

		if (firstWord.equalsIgnoreCase("implements")) {
			return filterExact (getInterfaceList(projectModel, elementName, offset), elementName);
		}

		if (foundExtends && foundImplements) {
			if (extendsMatcher.start() < implementsMatcher.start()) {
				return filterExact (getInterfaceList(projectModel, elementName, offset), elementName);
			} else {
				return filterExact (getBaseClassList(projectModel, elementName, offset, isClassDeclaration), elementName);
			}
		}

		if (foundImplements) {
			return filterExact (getInterfaceList(projectModel, elementName, offset), elementName);
		}
		if (isClassDeclaration) {
			return filterExact (getImplementsCodeData(projectModel, elementName, offset), elementName);
		}
		return null;
	}

