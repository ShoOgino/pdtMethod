	public void selectionChanged(final IWorkbenchPart part, final ISelection selection) {
		Object selectedElement = computeSelectedElement(part, selection);
		if (selectedElement != null) {
			//Check if PHPCodeData since selection can be FileData, FunctionData etc...
			if (selectedElement instanceof PHPCodeData) {
				UserData userData = ((PHPCodeData) selectedElement).getUserData();
				if (userData != null && ExternalPhpFilesRegistry.getInstance().isEntryExist(userData.getFileName())) {
					return;
				}
			}

			Object oldSelectedElement = ((IStructuredSelection) viewer.getSelection()).getFirstElement();
			if (selectedElement.equals(oldSelectedElement))
				return;
			if (selectedElement instanceof IResource && selectedElement.equals(PHPModelUtil.getResource(oldSelectedElement))) {
				return;
			}
			viewer.setSelection(createSelection(selectedElement), true);
		} else if (resetEmptySelection && !viewer.getSelection().isEmpty())
			viewer.setSelection(null);
	}

