	private ICompletionProposal[] getCodeCompletionOptions(ITextViewer viewer, DOMModelForPHP phpEditorModel, int offset, boolean explicit) throws BadLocationException {
		completionProposalGroup = null;
		templateProposals = null;
		calcCompletionOption(phpEditorModel, offset, viewer, explicit);
		if (completionProposalGroup == null) {
			return templateProposals;
		}
		boolean groupCompletionOptions = preferences.getBoolean(PHPCoreConstants.CODEASSIST_GROUP_OPTIONS);
		boolean cutCommonPrefix = preferences.getBoolean(PHPCoreConstants.CODEASSIST_CUT_COMMON_PREFIX);
		completionProposalGroup.setGroupOptions(groupCompletionOptions);
		completionProposalGroup.setCutCommonPrefix(cutCommonPrefix);
		return merg(completionProposalGroup.getCompletionProposals(getProjectModel(phpEditorModel)), templateProposals);
	}

