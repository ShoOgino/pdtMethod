	private void updateCurrentSelection(ITextEditor textEditor,
			Position selectionPosition, LinePosition start, LinePosition end,
			IDocument document, boolean updateStartOffset) {
		// update the selection if text selection changed
		if (start != null && end != null) {
			ITextSelection selection = null;
			try {
				int offset = getOffset(document, start);
				selection = new TextSelection(document, offset, getOffset(
						document, end)
						- offset);
			} catch (BadLocationException e) {
				PHPUiPlugin.log(e);
			}
			ISelectionProvider provider = textEditor.getSelectionProvider();
			if (provider != null && selection != null) {
				provider.setSelection(selection);
			}
			document.removePosition(selectionPosition);
		}
	}

