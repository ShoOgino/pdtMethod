	private void createFileAnnotations(Map<ProjectionAnnotation, Position> currentAnnotations, Map<ProjectionAnnotation, Position> addedAnnotations, PHPFileData fileData, int startOffset, int endOffset) {
		final ProjectionModelNodeAdapterFactoryPHP adapterFactory = getAdapterFactory();
		assert adapterFactory != null : "provider can't be null - see setProvider()";

		// set the automatic folding according to preference
		final boolean foldingPhpDoc = adapterFactory.isFoldingPhpDoc();
		final boolean foldingFunctions = adapterFactory.isFoldingFunctions();
		final boolean foldingClasses = adapterFactory.isFoldingClasses();

		// adds the file doc block
		createDocBlockAnnotations(currentAnnotations, addedAnnotations, fileData, startOffset, endOffset, foldingPhpDoc);

		PHPClassData[] classes = fileData.getClasses();
		for (PHPClassData classData : classes) {
			createCodeDataAnnotations(currentAnnotations, addedAnnotations, classData, startOffset, endOffset, foldingClasses);
			createDocBlockAnnotations(currentAnnotations, addedAnnotations, classData, startOffset, endOffset, foldingPhpDoc);
			PHPFunctionData[] methods = classData.getFunctions();
			for (PHPFunctionData methodData : methods) {
				createCodeDataAnnotations(currentAnnotations, addedAnnotations, methodData, startOffset, endOffset, foldingFunctions);
				createDocBlockAnnotations(currentAnnotations, addedAnnotations, methodData, startOffset, endOffset, foldingPhpDoc);
			}
			PHPClassVarData[] variables = classData.getVars();
			for (PHPClassVarData variableData : variables) {
				createDocBlockAnnotations(currentAnnotations, addedAnnotations, variableData, startOffset, endOffset, foldingPhpDoc);
			}

			PHPClassConstData[] constants = classData.getConsts();
			for (PHPClassConstData variableData : constants) {
				createDocBlockAnnotations(currentAnnotations, addedAnnotations, variableData, startOffset, endOffset, foldingPhpDoc);
			}
		}

		PHPFunctionData[] functions = fileData.getFunctions();
		for (PHPFunctionData functionData : functions) {
			createCodeDataAnnotations(currentAnnotations, addedAnnotations, functionData, startOffset, endOffset, foldingFunctions);
			createDocBlockAnnotations(currentAnnotations, addedAnnotations, functionData, startOffset, endOffset, foldingPhpDoc);
		}
	}

