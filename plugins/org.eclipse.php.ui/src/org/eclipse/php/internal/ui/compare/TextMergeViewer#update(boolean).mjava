	/* package */void update(boolean includeControls) {
		if (getControl().isDisposed())
			return;
		if (fHasErrors) {
			resetDiffs();
		} else {
			doDiff();
		}
		// https://bugs.eclipse.org/bugs/show_bug.cgi?id=453799
		// Viewer may be disposed when there are no more diffs available
		if (getControl().isDisposed())
			return;

		if (includeControls)
			updateControls();

		updateVScrollBar();
		updatePresentation(null);
	}

