	private SelectionListenerAction createWorkbenchAction(
			IStructuredSelection selection) {
		List<?> list = selection.toList();
		SelectionListenerAction action = null;
		if (fShell == null) {
			fShell = PlatformUI.getWorkbench().getActiveWorkbenchWindow()
					.getShell();
		}

		if (list.size() == 0
				|| list.get(0) instanceof IProject
				|| (list.get(0) instanceof IAdaptable && ((IAdaptable) list
						.get(0)).getAdapter(IResource.class) instanceof IProject)) {
			action = new PHPMoveProjectAction(fShell);
			action.selectionChanged(selection);
		} else if (selectedResources != null) {
			action = new MoveResourceAction(fShell);
			Object object = ((IStructuredSelection) selection)
					.getFirstElement();
			IResource resource = null;
			if (object instanceof IModelElement) {
				resource = ((IModelElement) object).getResource();
			}
			if (object instanceof IResource) {
				resource = (IResource) object;
			}
			if (object instanceof ElementImplForPhp) {
				resource = ((ElementImplForPhp) object).getModelElement()
						.getResource();
			}
			if (resource != null) {
				selection = new StructuredSelection(resource);
			}
			action.selectionChanged(selection);

		}
		return action;
	}

