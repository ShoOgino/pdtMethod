	private void checkForColorUpdate(Display display) {
		if (fPollSystemForeground) {
			RGB fg = fPreferenceStore.getBoolean(AbstractTextEditor.PREFERENCE_COLOR_BACKGROUND_SYSTEM_DEFAULT)
					? display.getSystemColor(SWT.COLOR_LIST_FOREGROUND).getRGB()
					: new Color(display, PreferenceConverter.getColor(fPreferenceStore,
							AbstractTextEditor.PREFERENCE_COLOR_FOREGROUND)).getRGB();
			if (fForeground == null || !fg.equals(fForeground)) {
				fForeground = fg;
				updateColors(display);
			}
		}
		if (fPollSystemBackground) {
			RGB bg = fPreferenceStore.getBoolean(AbstractTextEditor.PREFERENCE_COLOR_BACKGROUND_SYSTEM_DEFAULT)
					? display.getSystemColor(SWT.COLOR_LIST_BACKGROUND).getRGB()
					: new Color(display, PreferenceConverter.getColor(fPreferenceStore,
							AbstractTextEditor.PREFERENCE_COLOR_BACKGROUND)).getRGB();
			if (fBackground == null || !bg.equals(fBackground)) {
				fBackground = bg;
				updateColors(display);
			}
		}
	}

