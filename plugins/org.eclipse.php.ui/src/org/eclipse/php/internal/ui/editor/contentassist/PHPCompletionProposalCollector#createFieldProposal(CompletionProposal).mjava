	protected IScriptCompletionProposal createFieldProposal(
			final CompletionProposal proposal) {
		String completion = String.valueOf(proposal.getCompletion());
		int start = proposal.getReplaceStart();
		int length = getLength(proposal);
		String displayString = ((PHPCompletionProposalLabelProvider) getLabelProvider())
				.createFieldProposalLabel(proposal);
		Image image = getImage(((PHPCompletionProposalLabelProvider) getLabelProvider())
				.createFieldImageDescriptor(proposal));

		ScriptCompletionProposal scriptProposal = new PHPCompletionProposal(
				completion, start, length, image, displayString, 0) {
			private boolean fReplacementStringComputed = false;

			public String getReplacementString() {
				if (!fReplacementStringComputed) {
					String replacementString = computeReplacementString();
					if (ProposalExtraInfo.isAddQuote(proposal.getExtraInfo())) {
						replacementString = "'" + replacementString + "'"; //$NON-NLS-1$ //$NON-NLS-2$
					}
					setReplacementString(replacementString);
				}
				fReplacementStringComputed = true;
				return super.getReplacementString();
			}

			private String computeReplacementString() {
				IField field = (IField) proposal.getModelElement();
				if (field instanceof AliasField) {
					AliasField aliasField = (AliasField) field;
					return aliasField.getAlias();
				}
				if (ProposalExtraInfo.isFullName(proposal.getExtraInfo())) {
					return field.getFullyQualifiedName("\\"); //$NON-NLS-1$
				}
				return super.getReplacementString();
			}

			@Override
			public Object getExtraInfo() {
				return proposal.getExtraInfo();
			}
		};
		if (getSourceModule().getScriptProject() != null) {
			scriptProposal.setProposalInfo(new FieldProposalInfo(
					getSourceModule().getScriptProject(), proposal));
		}
		scriptProposal.setRelevance(computeRelevance(proposal));
		scriptProposal.setTriggerCharacters(getVarTrigger());
		return scriptProposal;
	}

