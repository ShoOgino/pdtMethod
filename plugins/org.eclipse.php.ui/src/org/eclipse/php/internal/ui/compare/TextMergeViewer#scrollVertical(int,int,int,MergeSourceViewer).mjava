	private void scrollVertical(int avpos, int lvpos, int rvpos,
			MergeSourceViewer allBut) {

		int s = 0;

		if (fSynchronizedScrolling) {
			s = fMerger.getVirtualHeight() - rvpos;
			int height = fRight.getViewportLines() / 4;
			if (s < 0)
				s = 0;
			if (s > height)
				s = height;
		}

		fInScrolling = true;

		if (isThreeWay() && allBut != fAncestor) {
			if (fSynchronizedScrolling || allBut == null) {
				int y = virtualToRealPosition(ANCESTOR_CONTRIBUTOR, avpos + s)
						- s;
				fAncestor.vscroll(y);
			}
		}

		if (allBut != fLeft) {
			if (fSynchronizedScrolling || allBut == null) {
				int y = virtualToRealPosition(LEFT_CONTRIBUTOR, lvpos + s) - s;
				fLeft.vscroll(y);
			}
		}

		if (allBut != fRight) {
			if (fSynchronizedScrolling || allBut == null) {
				int y = virtualToRealPosition(RIGHT_CONTRIBUTOR, rvpos + s) - s;
				fRight.vscroll(y);
			}
		}

		fInScrolling = false;

		if (isThreeWay() && fAncestorCanvas != null)
			fAncestorCanvas.repaint();

		if (fLeftCanvas != null)
			fLeftCanvas.repaint();

		Control center = getCenterControl();
		if (center instanceof BufferedCanvas)
			((BufferedCanvas) center).repaint();

		if (fRightCanvas != null)
			fRightCanvas.repaint();
	}

