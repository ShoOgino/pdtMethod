	/*
	 * Resolve the class declaration type for the given node.
	 * This method traverse upward to find a defining ClassDeclaration and then resolves its IType.
	 */
	protected IType resolveDeclaringClassType(ASTNode node) {
		ASTNode parent = node.getParent();
		ClassDeclaration declaration = null;
		while (declaration == null && parent != null) {
			if (parent.getType() == ASTNode.CLASS_DECLARATION) {
				declaration = (ClassDeclaration) parent;
			}
			parent = parent.getParent();
		}
		if (declaration != null) {
			final ISourceModule source = declaration.getProgramRoot().getSourceModule();
			return source != null ? source.getType(declaration.getName().getName()) : null;
		}
		return null;
	}

