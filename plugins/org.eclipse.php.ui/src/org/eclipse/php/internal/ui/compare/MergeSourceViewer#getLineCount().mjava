	/*
	 * Returns number of lines in document region.
	 */
	public int getLineCount() {
		IRegion region = getVisibleRegion();

		int length = region.getLength();
		if (length == 0)
			return 0;

		IDocument doc = getDocument();
		int startLine = 0;
		int endLine = 0;

		int start = region.getOffset();
		try {
			startLine = doc.getLineOfOffset(start);
		} catch (BadLocationException ex) {
			// silently ignored
		}
		try {
			endLine = doc.getLineOfOffset(start + length);
		} catch (BadLocationException ex) {
			// silently ignored
		}

		return endLine - startLine + 1;
	}

