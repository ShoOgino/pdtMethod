	private void doSelectionChanged() {
		boolean isValidSelection = true;
		boolean canExtend = false;
		StatusInfo status = new StatusInfo();

		List selected = fVariablesList.getSelectedElements();
		int nSelected = selected.size();

		if (nSelected > 0) {
			fResultPaths = new Path[nSelected];
			for (int i = 0; i < nSelected; i++) {
				IPVariableElement curr = (IPVariableElement) selected.get(i);
				fResultPaths[i] = new Path(curr.getName());
				if (!curr.getPath().toFile().isFile()) {
					status.setInfo(PHPUIMessages.NewVariableEntryDialog_info_isfolder);
					canExtend = true;
				}
			}
		} else {
			isValidSelection = false;
			status.setInfo(PHPUIMessages.NewVariableEntryDialog_info_noselection);
		}
		if (isValidSelection && nSelected > 1) {
			String str = MessageFormat.format(PHPUIMessages.NewVariableEntryDialog_info_selected, new String[] { String.valueOf(nSelected) });
			status.setInfo(str);
		}
		fCanExtend = nSelected == 1 && canExtend;
		fVariablesList.enableButton(0, fCanExtend);

		updateStatus(status);
		fIsValidSelection = isValidSelection;
		Button okButton = getButton(IDialogConstants.OK_ID);
		if (okButton != null && !okButton.isDisposed()) {
			okButton.setEnabled(isValidSelection);
		}
	}

