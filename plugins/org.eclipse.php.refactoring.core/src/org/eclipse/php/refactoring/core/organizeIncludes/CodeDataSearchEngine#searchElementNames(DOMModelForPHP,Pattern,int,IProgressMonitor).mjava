	private static Set<String> searchElementNames(DOMModelForPHP model,
			Pattern pattern, int elementPatternPosition,
			IProgressMonitor monitor) {
		IStructuredDocument document = ((IStructuredModel) model)
				.getStructuredDocument();
		String documentContents = null;
		try {
			documentContents = document.get(0, document.getLength());
		} catch (BadLocationException e) {
			RefactoringPlugin.logException(e);
		}
		Set<String> elements = new HashSet<String>();
		if (documentContents == null)
			return elements;
		monitor.beginTask(
				PhpRefactoringCoreMessages.getString("CodeDataSearchEngine.16"), 2); //$NON-NLS-1$
		Matcher matcher = pattern.matcher(documentContents);
		while (matcher.find()) {
			int end = matcher.end();
			if (!isCode(document, end))
				continue;
			String elementName = matcher.group(elementPatternPosition);
			elements.add(elementName);
		}
		return elements;
	}

