    private IStackFrame[] createNewFrames(StackLayer[] layers, PHPThread thread, int length, String context, boolean isWindows) throws DebugException {

        IStackFrame[] frames = new IStackFrame[((layers.length - 1) * 2) + 1];
        int frameCt = ((layers.length - 1) * 2 + 1);
        for (int i = 1; i < layers.length; i++) {
            String sName = RemoteDebugger.convertToSystemIndependentFileName(layers[i].getCallerFileName());
            String rName = getLocalFileName(sName, context, length, isWindows);
            frames[frameCt - 1] = new PHPStackFrame(thread, sName, layers[i].getCallerFunctionName(), layers[i].getCallerLineNumber() + 1, frameCt, rName);
            frameCt--;
            sName = RemoteDebugger.convertToSystemIndependentFileName(layers[i].getCalledFileName());
            rName = getLocalFileName(sName, context, length, isWindows);
            frames[frameCt - 1] = new PHPStackFrame(thread, sName, layers[i].getCalledFunctionName(), layers[i].getCalledLineNumber() + 1, frameCt, layers[i], rName);
            frameCt--;
        }

        frames[0] = new PHPStackFrame(thread, fTarget.getLastFileName(), (layers.length == 1) ? "" : frames[1].getName(), 
            fTarget.getLastStop(), frameCt, getLocalFileName(fTarget.getLastFileName(), context, length, isWindows));
        fPreviousLayers = layers;
        return frames;
    }

