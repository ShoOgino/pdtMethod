	/*
	 * (non-Javadoc)
	 * 
	 * @see org.eclipse.debug.core.IBreakpointListener#breakpointAdded(org.eclipse.debug.core.model.IBreakpoint)
	 */
	public void breakpointAdded(IBreakpoint breakpoint) {
		if (supportsBreakpoint(breakpoint)) {
			try {
				if (breakpoint.isEnabled()) {
					fLastcmd = "breakpointAdded";
					PHPLineBreakpoint bp = (PHPLineBreakpoint) breakpoint;
					IMarker marker = bp.getMarker();
					IResource resource = null;
					Breakpoint runtimeBreakpoint = bp.getRuntimeBreakpoint();
					int lineNumber = runtimeBreakpoint.getLineNumber();
					if (breakpoint instanceof PHPRunToLineBreakpoint) {
						PHPRunToLineBreakpoint rtl = (PHPRunToLineBreakpoint) breakpoint;
						resource = rtl.getSourceFile();
					} else {
						resource = marker.getResource();
						lineNumber = marker.getAttribute(IMarker.LINE_NUMBER, 0);
						runtimeBreakpoint.setLineNumber(lineNumber);
					}
					String fileName;
					if (!fIsPHPCGI) {
						if (resource instanceof ExternalFileDecorator) {
							fileName = resource.toString();
						}else if (resource instanceof IWorkspaceRoot) {
							if (IPHPConstants.STORAGE_TYPE_REMOTE.equals(marker.getAttribute(IPHPConstants.STORAGE_TYPE))) {
								fileName = (String) marker.getAttribute(IPHPConstants.STORAGE_FILE);
								fileName = marker.getAttribute(StructuredResourceMarkerAnnotationModel.SECONDARY_ID_KEY, fileName);
							} else {
								fileName = fHTDocs + '/' + (String) marker.getAttribute(IPHPConstants.STORAGE_FILE);
							}
						} else {
							if (fHTDocs == null || fHTDocs.length() == 0) {
								if (fContextRoot == null || fContextRoot.length() <= 1) {
									fileName = resource.getProjectRelativePath().toString();
								} else {
									fileName = fContextRoot + resource.getProjectRelativePath();
								}
							} else {
								fileName = fHTDocs + fContextRoot + resource.getProjectRelativePath();
							}
							//							fileName = resource.getProjectRelativePath().toString();
						}
					} else {
						if (resource instanceof ExternalFileDecorator) {
							fileName = resource.toString();
						} else if (resource instanceof IWorkspaceRoot) {
							// If the breakpoint was set on a non-workspace file, make sure that the file name for the breakpoint
							// is taken correctly.
							fileName = (String) marker.getAttribute(IPHPConstants.STORAGE_FILE);
							if (IPHPConstants.STORAGE_TYPE_INCLUDE.equals(marker.getAttribute(IPHPConstants.STORAGE_TYPE))) {
								fileName = marker.getAttribute(StructuredResourceMarkerAnnotationModel.SECONDARY_ID_KEY, fileName);
							}
						} else {
							fileName = (resource.getRawLocation()).toString();
						}
					}

					runtimeBreakpoint.setFileName(fileName);
					Logger.debugMSG("[" + this + "] PHPDebugTarget: Setting Breakpoint - File " + fileName + " Line Number " + lineNumber);
					debugger.addBreakpoint(bp.getRuntimeBreakpoint(), fBreakpointAddedResponseHandler);
				}
			} catch (CoreException e1) {
				Logger.logException("PHPDebugTarget: Exception Adding Breakpoint", e1);
			}
		}
	}

