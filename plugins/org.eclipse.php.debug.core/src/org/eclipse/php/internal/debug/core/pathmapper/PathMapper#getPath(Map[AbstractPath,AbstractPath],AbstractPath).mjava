	protected AbstractPath getPath(Map<AbstractPath, AbstractPath> map, AbstractPath path) {
		path = path.clone();
		List<String> strippedSegments = new LinkedList<String>();
		while (path.getSegmentsCount() > 0) {
			AbstractPath mapPath = map.get(path);
			if (mapPath != null) {
				mapPath = mapPath.clone();
				ListIterator<String> i = strippedSegments.listIterator(strippedSegments.size());
				while (i.hasPrevious()) {
					mapPath.addLastSegment(i.previous());
				}
				return mapPath;
			}
			strippedSegments.add(path.removeLastSegment());
		}
		return null;
	}

