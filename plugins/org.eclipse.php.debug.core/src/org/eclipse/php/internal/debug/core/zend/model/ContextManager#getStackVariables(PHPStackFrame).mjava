	public Expression[] getStackVariables(PHPStackFrame stack) {
		String functionName = "";
		try {
			functionName = stack.getName();
		} catch (DebugException e) {
			// PHPStack Doesn't throw exception, just log and ignore
			Logger.logException("PHP Problem getting name from stack", e);
		}

		Expression[] variables = new Expression[0];
		if (!functionName.equals("")) {
			StackLayer stackLayer = null;
			try {
				for (int i = fPreviousLayers.length - 1; i >= 0; --i) {
					StackLayer element = fPreviousLayers[i];
					if (element.getCalledFileName().equals(stack.getAbsoluteFileName())
							&& element.getCalledFunctionName().equals(stack.getName())) {
						stackLayer = element;
						break;
					}
				}
			} catch (DebugException e) {
			}

			if (stackLayer != null) {
				variables = stackLayer.getVariables();
			}
		}
		return variables;
	}

