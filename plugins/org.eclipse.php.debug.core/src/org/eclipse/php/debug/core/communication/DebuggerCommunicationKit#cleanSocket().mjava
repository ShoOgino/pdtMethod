	/**
	 * Destroys the socket and initialize it to null.
	 */
	protected void cleanSocket() {
		if (!isInitialized) {
			return;
		}
		//        System.out.println("close connection");
		if (communicationSocket != null) {
			try {
				communicationSocket.shutdownInput();
			} catch (Exception exc) {
			}

			try {
				communicationSocket.shutdownOutput();
			} catch (Exception exc) {
			}
		}
		if (out != null) {
			try {
				synchronized (out) {
					out.close();
				}
			} catch (Exception exc) {
			}
		}

		if (communicationSocket != null) {
			try {
				communicationSocket.close();
			} catch (Exception exc) {
			}
		}
		if (in != null) {
			try {
				in.close();
			} catch (Exception exc) {
			}
		}

		communicationSocket = null;
		in = null;
        if (out != null) {
            synchronized (out) {
                out = null;
            }
        }
	}

