	/**
	 * Hook a server debug session
	 * 
	 * @param launch An {@link ILaunch}
	 */
	protected void hookServerDebug(ILaunch launch) throws CoreException {
		PHPServerLaunchDecorator launchDecorator = (PHPServerLaunchDecorator) launch;
		ILaunchConfiguration launchConfiguration = launch.getLaunchConfiguration();
		inputManager.setTransferEncoding(launchConfiguration.getAttribute(IDebugParametersKeys.TRANSFER_ENCODING, ""));
		//		ApacheServerBehaviour serverBehaviour = launchDecorator.getApacheServerBahavior();
		//		String URL = launchConfiguration.getAttribute(ApachePlugin.URL, "");
		//		String contextRoot = launchConfiguration.getAttribute(ApachePlugin.CONTEXT_ROOT, "");
		String URL = launchConfiguration.getAttribute(Server.BASE_URL, "");
		String contextRoot = launchConfiguration.getAttribute(Server.CONTEXT_ROOT, "");
		boolean stopAtFirstLine = PHPProjectPreferences.getStopAtFirstLine(launchDecorator.getProject());
		int requestPort = PHPProjectPreferences.getDebugPort(launchDecorator.getProject());
		boolean runWithDebug = launchConfiguration.getAttribute("run_with_debug", true);
		if (launch.getLaunchMode().equals(ILaunchManager.DEBUG_MODE)) {
			runWithDebug = false;
		}
		PHPProcess process = new PHPProcess(launch, URL);
		//		serverBehaviour.setProcess(process);
		PHPDebugTarget target = new PHPDebugTarget(this, launch, URL, requestPort, process, contextRoot, runWithDebug, stopAtFirstLine, launchDecorator.getProject());
		launch.addDebugTarget(target);
	}

