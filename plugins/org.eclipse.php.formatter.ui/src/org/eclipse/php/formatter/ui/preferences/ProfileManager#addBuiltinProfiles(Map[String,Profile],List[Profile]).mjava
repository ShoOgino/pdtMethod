	/**
	 * Add all the built-in profiles to the map and to the list. PHP Default is
	 * loaded first and then profiles registered through
	 * org.eclipse.php.formatter.ui.profiles extension point
	 * 
	 * @param profiles
	 *            The map to add the profiles to
	 * @param profilesByName
	 *            List of profiles by
	 */
	private void addBuiltinProfiles(Map<String, Profile> profiles,
			List<Profile> profilesByName) {
		int order = 1;
		String builtinPostFix = FormatterMessages.ProfileManager_built_in_postfix;
		final Profile phpProfile = new BuiltInProfile(PHP_PROFILE,
				FormatterMessages.ProfileManager_php_conventions_profile_name
						+ builtinPostFix, getPhpSettings(), order);
		profiles.put(phpProfile.getID(), phpProfile);
		profilesByName.add(phpProfile);

		IConfigurationElement[] elements = Platform.getExtensionRegistry()
				.getConfigurationElementsFor(FormatterUIPlugin.PLUGIN_ID,
						PROFILES_EXTENSION_POINT_ID);
		for (int i = 0; i < elements.length; i++) {
			IConfigurationElement element = elements[i];
			if ("profile".equals(element.getName())) { //$NON-NLS-1$
				String id = element.getAttribute("id"); //$NON-NLS-1$
				String name = element.getAttribute("name"); //$NON-NLS-1$
				if (element.getAttribute("class") != null) { //$NON-NLS-1$
					try {
						ICodeFormatterPreferencesInitializer initializer = (ICodeFormatterPreferencesInitializer) element
								.createExecutableExtension("class"); //$NON-NLS-1$
						CodeFormatterPreferences preferences = initializer
								.initValues();
						final Profile extensionProfile = new BuiltInProfile(id,
								name + builtinPostFix, preferences.getMap(),
								++order);
						profiles.put(extensionProfile.getID(), extensionProfile);
						profilesByName.add(extensionProfile);
					} catch (CoreException e) {
						FormatterUIPlugin.log(e);
					}
				}
			}
		}
	}

