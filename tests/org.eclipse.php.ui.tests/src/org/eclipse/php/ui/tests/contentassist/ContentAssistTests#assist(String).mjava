	@Test
	public void assist(String fileName) throws Exception {
		final PdttFile pdttFile = new PdttFile(PHPUiTests.getDefault()
				.getBundle(), fileName);
		pdttFile.applyPreferences();

		String data = pdttFile.getFile();
		int offset = data.lastIndexOf(OFFSET_CHAR);

		// replace the offset character
		data = data.substring(0, offset) + data.substring(offset + 1);
		createFile(new ByteArrayInputStream(data.getBytes()),
				Long.toString(System.currentTimeMillis()),
				prepareOtherStreams(pdttFile));
		String result = executeAutoInsert(offset);
		closeEditor();
		if (!pdttFile.getExpected().trim().equals(result.trim())) {
			StringBuilder errorBuf = new StringBuilder();
			errorBuf.append("\nEXPECTED COMPLETIONS LIST:\n-----------------------------\n");
			errorBuf.append(pdttFile.getExpected());
			errorBuf.append("\nACTUAL COMPLETIONS LIST:\n-----------------------------\n");
			errorBuf.append(result);
			fail(errorBuf.toString());
		}
	}

