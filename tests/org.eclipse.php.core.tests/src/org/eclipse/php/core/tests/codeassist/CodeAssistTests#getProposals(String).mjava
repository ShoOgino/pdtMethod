	protected static CompletionProposal[] getProposals(String data) throws Exception {
		int offset = createFile(data);
		final List<CompletionProposal> proposals = new LinkedList<CompletionProposal>();
		getSourceModule().codeComplete(offset, new CompletionRequestor() {
			public void accept(CompletionProposal proposal) {
				proposals.add(proposal);
			}
		});
		return (CompletionProposal[]) proposals.toArray(new CompletionProposal[proposals.size()]);
	}

