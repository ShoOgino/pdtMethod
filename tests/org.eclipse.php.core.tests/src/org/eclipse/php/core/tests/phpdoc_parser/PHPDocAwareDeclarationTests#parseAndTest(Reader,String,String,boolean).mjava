	/**
	 *
	 * @param reader stringReader of inputstream
	 * @param declarationName
	 * @param str
	 * @throws Exception
	 */
	public void parseAndTest(Reader reader, String declarationName, String str, boolean positiveTest) throws Exception {
		ModuleDeclaration program = new PhpSourceParser().parse(reader, null);

		DeclarationSearcher searcher = new DeclarationSearcher(declarationName);
		program.traverse(searcher);
		Declaration declaration = searcher.getResult();

		Assert.assertNotNull("Can't find declaration AST node for: " + declarationName, declaration);
		Assert.assertTrue("Declaration is not PHPDoc aware: " + declarationName, declaration instanceof IPHPDocAwareDeclaration);
		PHPDocBlock phpDoc = ((IPHPDocAwareDeclaration) declaration).getPHPDoc();

		if (positiveTest) {
			Assert.assertNotNull("No PHPDoc section found for:" + declarationName, phpDoc);
			Assert.assertNotNull("PHPDoc doesn't contain short description: " + declarationName, phpDoc.getShortDescription());
		} else {
			Assert.assertNull("Declaration node: " + declarationName + " must not contain PHPDoc section", phpDoc);
		}
	}

