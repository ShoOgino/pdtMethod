	/*
	 * TODO: we need to escape '=' and ';' characters in key/values.
	 */
    private static String toDB(Properties keyValues, boolean asQuery) {
        Set<?> set= keyValues.keySet();
        String[] keys= set.toArray(new String[set.size()]);
        Arrays.sort(keys);
        StringBuffer sb= new StringBuffer();
        
        for (int i= 0; i < keys.length; i++) {
            if (asQuery)
                sb.append('%');
            String key= keys[i];
            String value= keyValues.getProperty(key);
            sb.append('|');
            sb.append(key);
            sb.append('=');
            if (value != null)
                sb.append(value);
            sb.append('|');
        }
        if (asQuery)
            sb.append('%');
	    return sb.toString();
    }

