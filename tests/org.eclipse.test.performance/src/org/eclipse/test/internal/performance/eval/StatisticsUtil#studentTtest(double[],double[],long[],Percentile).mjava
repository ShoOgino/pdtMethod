    public static double studentTtest(double[] values, double[] stddevs, long[] counts, Percentile percentile) {
    
        double ref = values[0];
        double val= values[1];
        
        double delta= ref - val;
        long df1= counts[0] - 1;
        double sd1= stddevs[0];
        long df2= counts[1];
        double sd2= stddevs[1];
        // TODO if the stdev's are not sufficiently similar, we have to take a different approach
        
        if (!Double.isNaN(sd1) && !Double.isNaN(sd2) && df1 > 0 && df2 > 0) {
            long df= df1 + df2;
            double sp_square= (df1 * sd1 * sd1 + df2 * sd2 * sd2) / df;
    
            double se_diff= Math.sqrt(sp_square * (1.0 / (df1 + 1) + 1.0 / (df2 + 1)));
            return Math.abs(delta / se_diff);
        }
        
        return -1;
    }

