	public List<TestCase> createTest() {
		List<TestCase> tests = new ArrayList<TestCase>();
		try {
			initFiles();
			PHPCoreTests.setProjectPhpVersion(project.getProject(),
					PHPVersion.PHP5_4);
		} catch (Exception e1) {
			return tests;
		}

		for (final String fileName : filesMap.keySet()) {
			final PdttFileExt testFile = filesMap.get(fileName);
			tests.add(new RenameTraitProcessorTest(fileName) {
				@Override
				protected void runTest() throws Throwable {
					IFile file = project.findFile(testFile.getTestFiles().get(0).getName());

					Program program = createProgram(file);

					assertNotNull(program);

					int start = Integer.valueOf(testFile.getConfig().get("start"));
					ASTNode selectedNode = locateNode(program, start, 0);
					assertNotNull(selectedNode);

					RenameTraitProcessor processor = new RenameTraitProcessor(file, selectedNode);

					processor.setNewElementName(testFile.getConfig().get("newName"));
					processor.setUpdateTextualMatches(Boolean.valueOf(testFile.getConfig().get("updateTextualMatches")));

					checkInitCondition(processor);
					checkFinalCondition(processor);
					
					performChange(processor);
					checkTestResult(testFile);
				}
				@Override
				protected void tearDown() throws Exception {

				}	
			});
		}
		return tests;
	}

