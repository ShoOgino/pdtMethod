	public Test suite(final Metadata metadata) {
		this.metadata = metadata;

		TestSuite suite = new TestSuite(metadata.project + " Performance Tests");

		addTests(suite);

		// Create a setup wrapper
		TestSetup setup = new TestSetup(suite) {
			protected void setUp() throws Exception {
				deleteProject(metadata.project);
				IProject project = getProject(metadata.project);

				IScriptProject scriptProject = DLTKCore.create(project);
				project.create(null);
				project.open(null);

				// configure nature
				IProjectDescription desc = project.getDescription();
				desc.setNatureIds(new String[] { PHPNature.ID });
				project.setDescription(desc, null);
				ProjectOptions.setPhpVersion(metadata.phpVersion, project
						.getProject());

				Util.downloadAndExtract(metadata.url, scriptProject
						.getProject().getLocation().toString());
				perfMonitor = PHPCorePerformanceTests.getPerformanceMonitor();
			}

			protected void tearDown() throws Exception {
				deleteProject(metadata.project);
			}
		};
		return setup;
	}

