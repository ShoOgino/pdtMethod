	private int getTestId(String testId) throws Exception {
		Connection connection = pool.getConnection();
		try {
			PreparedStatement statement = connection
					.prepareStatement("SELECT ID FROM TESTS WHERE NAME=?;");
			statement.setString(1, testId);
			try {
				ResultSet result = statement.executeQuery();
				try {
					if (result.next()) {
						return result.getInt(1);
					}
				} finally {
					result.close();
				}
			} finally {
				statement.close();
			}

			statement = connection.prepareStatement(
					"INSERT INTO TESTS(NAME) VALUES(?);",
					Statement.RETURN_GENERATED_KEYS);
			try {
				statement.setString(1, testId);
				statement.executeUpdate();
				ResultSet result = statement.getGeneratedKeys();
				try {
					result.next();
					return result.getInt(1);
				} finally {
					result.close();
				}
			} finally {
				statement.close();
			}
		} finally {
			connection.close();
		}
	}

