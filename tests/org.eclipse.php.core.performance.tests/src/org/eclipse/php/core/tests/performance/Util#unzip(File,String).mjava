	public static void unzip(File file, String targetDirectory) throws Exception {

		System.out.println("Extracting: " + file);

		ZipFile zipFile = new ZipFile(file);
		Enumeration<?> entries = zipFile.entries();

		String stripName = file.getName();
		int i = stripName.lastIndexOf('.');
		if (i > 0) {
			stripName = stripName.substring(0, i);
		}

		while (entries.hasMoreElements()) {
			ZipEntry entry = (ZipEntry) entries.nextElement();

			String entryName = entry.getName();

			if (entryName.startsWith(stripName + "/") || entryName.startsWith(stripName + "\\")) {
				entryName = entryName.substring(stripName.length() + 1);
			}

			if (entry.isDirectory()) {
				File dir = new File(targetDirectory, entryName);
				dir.mkdirs();
				continue;
			}
			copyInputStream(zipFile.getInputStream(entry),
					new BufferedOutputStream(new FileOutputStream(new File(targetDirectory, entryName))));
		}
		zipFile.close();
	}

