	protected void configureProxy() {
		String httpProxy = System.getenv(HTTP_PROXY);
		if (httpProxy == null) {
			httpProxy = System.getenv(HTTP_PROXY.toLowerCase());
		}
		IProxyService proxyService = ComposerCorePlugin.getProxyService();
		if (httpProxy == null && proxyService != null) {
			IProxyData[] data = proxyService.getProxyData();
			if (data != null) {
				for (IProxyData proxyData : data) {
					if (HTTP.equalsIgnoreCase(proxyData.getType()) && proxyData.getPort() != -1
							&& proxyData.getHost() != null) {
						try {
							URL url = new URL(HTTP, proxyData.getHost(), proxyData.getPort(), ""); //$NON-NLS-1$
							String[] noProxyHosts = proxyService.getNonProxiedHosts();
							StringBuilder noProxy = new StringBuilder();
							for (String host : noProxyHosts) {
								if (noProxy.length() > 0) {
									noProxy.append(","); //$NON-NLS-1$
								}
								noProxy.append(host);
							}
							if (noProxy.length() > 0) {
								setEnvironmentVar(NO_PROXY, noProxy.toString());
							}
							String proxy = url.toString();
							setEnvironmentVar(HTTP_PROXY.toLowerCase(), proxy);
							setEnvironmentVar(HTTP_PROXY, proxy);
							break;
						} catch (MalformedURLException e) {
							ComposerCorePlugin.logError(e);
						}
					}
				}
			}
		}
	}

